import { useEffect } from 'react';

export default function QrPage() {
  useEffect(() => {
    const script = document.createElement('script');
    script.src = '/libs/qrcode.min.js';
    script.async = true;
    document.body.appendChild(script);

    return () => {
      document.body.removeChild(script);
    };
  }, []);

  return (
    <div>
      <canvas id="qrCanvas" width="200" height="200"></canvas>
      <button
        onClick={() => {
          const QRCode = window["QRCode"];
          if (!QRCode) return alert("QRCodeライブラリが読み込まれていません");

          new QRCode(document.getElementById('tempDiv'), {
            text: 'https://example.com',
            width: 200,
            height: 200,
          });
        }}
      >
        QRコード生成
      </button>
      <div id="tempDiv" style={{ display: 'none' }}></div>
    </div>
  );
}
